<!-- student-classes.html -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Manage Classes - AttendAce</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

  <!-- Shared UI Styles -->
  <link rel="stylesheet" href="styles2.css">
</head>

<body class="font-sans max-w-[420px] mx-auto overflow-y-auto relative z-10">

  <!-- GAMING BACKGROUND -->
  <div id="bg-anim"></div>

  <!-- CLICK SOUND -->
  <audio id="clickSound" src="https://assets.mixkit.co/sfx/preview/mixkit-game-click-1114.mp3" preload="auto"></audio>

  <!-- HEADER -->
  <header class="p-4 flex justify-between items-center reveal">
    <h1 class="font-black text-lg tracking-tight">AttendAce</h1>
    <button id="themeToggle" class="px-4 py-2 rounded-full glass text-xs font-bold press">
      OFFICIAL
    </button>
  </header>

  <section class="px-5 mt-4 reveal">
    <div class="glass p-6 relative overflow-hidden text-center">

      <h2 class="text-2xl font-black mb-4">My Classes</h2>

      <!-- Error -->
      <div id="errorMsg" class="text-red-500 text-sm mb-4"></div>

      <!-- Enrolled Classes -->
<div id="myClassesContainer" class="space-y-3 text-[var(--text)] text-left"></div>      <!-- Add Class -->
      <button id="addClassBtn" class="mt-6 w-full py-3 rounded-lg bg-[var(--accent)] text-white font-bold">
        + Add Class
      </button>
      <button class="menu-btn group w-full rounded-xl p-4 flex flex-col items-center"
              onclick="window.location.href='student-dashboard.html'">
        <!-- Main row: Icon + Button name -->
        <div class="flex items-center gap-3">
      <img src="assets/back.svg" alt="Developer Support" class="scan-icon w-6 h-6 transition-all duration-300">    
      <div class="text-lg">Return to Dashboard</div>
        </div>
      </button>
    </div>
  </section>

  <!-- Modal -->
  <div id="availableClassesModal" class="fixed inset-0 hidden bg-black/50 flex items-center justify-center z-50">
<div class="glass bg-[var(--card)] p-6 w-[95%] max-w-xl text-[var(--text)]">      <h3 class="text-lg font-semibold text-[var(--accent)] mb-4 text-center">Enroll in a Class</h3>

      <!-- Search -->
      <input id="classSearchInput" type="text" placeholder="Search by class or teacher name..."
       class="w-full mb-4 px-4 py-2 rounded-xl border border-gray-200
              text-gray-900 placeholder-gray-500
              focus:outline-none focus:ring-2 focus:ring-[var(--accent)]/30" />

      <!-- Available classes -->
      <div id="availableClassesContainer" class="space-y-2 max-h-[300px] overflow-y-auto"></div>

      <button id="closeModalBtn" class="mt-4 w-full bg-gray-200 text-gray-700 py-2 rounded-xl hover:bg-gray-300 transition">
        Close
      </button>
    </div>
  </div>

<script>

// âš¡ Apply mode instantly (before render)
const cachedUser = JSON.parse(localStorage.getItem('user'));

if (cachedUser?.mode === 'gaming') {
  document.body.classList.add('gaming');
  const toggleBtn = document.getElementById('themeToggle');
  if (toggleBtn) toggleBtn.innerText = 'GAMING';
} else if (cachedUser?.mode === 'official') {
  document.body.classList.remove('gaming');
  const toggleBtn = document.getElementById('themeToggle');
  if (toggleBtn) toggleBtn.innerText = 'OFFICIAL';
}

/* CLICK SOUND */
const clickSound = document.getElementById('clickSound');

// Play click sound for all buttons and links
document.querySelectorAll('button, a').forEach(el => {
  el.addEventListener('click', () => {
    clickSound.currentTime = 0; // rewind in case still playing
    clickSound.play().catch(err => {
      console.log("Click sound blocked by browser:", err);
    });
  });
});

/* THEME TOGGLE */
const toggle = document.getElementById('themeToggle');
toggle.onclick = () => {
  document.body.classList.toggle('gaming');
  toggle.innerText = document.body.classList.contains('gaming')
    ? 'GAMING'
    : 'OFFICIAL';
};

/* REVEAL ANIMATION */
const observer = new IntersectionObserver(entries => {
  entries.forEach(e => {
    if (e.isIntersecting) e.target.classList.add('show');
  });
}, { threshold: 0.15 });

document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

</script>
<script src="assets/student-classes.js"></script>
</body>
</html>